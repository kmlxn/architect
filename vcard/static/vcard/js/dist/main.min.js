/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

	'use strict';
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	var Handler = function () {
	    function Handler() {
	        _classCallCheck(this, Handler);
	    }
	
	    _createClass(Handler, [{
	        key: 'run',
	        value: function run() {
	            this.cache_dom();
	            this.bind_events();
	        }
	    }, {
	        key: 'cache_dom',
	        value: function cache_dom() {
	            this.$projects_nav = $('a#projects_nav');
	            this.$contacts_nav = $('a#contacts_nav');
	            this.$about_me_nav = $('a#about_me_nav');
	            this.$content = $('#content');
	            this.template = this.$content.find('[type="text/mustache_template"]').html();
	        }
	    }, {
	        key: 'bind_events',
	        value: function bind_events() {
	            this.$projects_nav.click(this.get_and_view_projects_tags.bind(this));
	            this.$contacts_nav.click(this.get_and_view_contacts_info.bind(this));
	            this.$about_me_nav.click(this.get_and_view_about_me_text.bind(this));
	            this.$content.on('click', '#projects_tags a', this.get_and_view_projects.bind(this));
	            this.$content.magnificPopup({
	                delegate: '.photo a',
	                type: 'ajax',
	                callbacks: { ajaxContentAdded: this.handle_popup.bind(this) }
	            });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var rendered = Mustache.render(this.template, this.data);
	            this.$content.html(rendered);
	        }
	    }, {
	        key: 'get_and_view_projects_tags',
	        value: function get_and_view_projects_tags(event) {
	            var _this = this;
	
	            $.get("/get_tags/").done(function (tags) {
	                _this.data = {
	                    tags: tags,
	                    has_tags: true
	                };
	
	                _this.render();
	            });
	
	            event.preventDefault();
	        }
	    }, {
	        key: 'get_and_view_contacts_info',
	        value: function get_and_view_contacts_info(event) {
	            var _this2 = this;
	
	            $.get("/get_contacts/").done(function (contacts) {
	                _this2.data = { contacts: contacts };
	                _this2.render();
	            });
	
	            event.preventDefault();
	        }
	    }, {
	        key: 'get_and_view_about_me_text',
	        value: function get_and_view_about_me_text(event) {
	            var _this3 = this;
	
	            $.get("/get_about_me_text/").done(function (about_me) {
	                _this3.data = { about_me: about_me };
	                _this3.render();
	            });
	
	            event.preventDefault();
	        }
	    }, {
	        key: 'prepare_projects',
	        value: function prepare_projects(projects) {
	            return projects.map(function (project) {
	                project.main_picture = project.pictures[0];
	                return project;
	            });
	        }
	    }, {
	        key: 'get_and_view_projects',
	        value: function get_and_view_projects(event) {
	            var _this4 = this;
	
	            var tag_url_name = event.currentTarget.id;
	
	            $.get('/get_projects/' + tag_url_name + '/').done(function (projects) {
	                _this4.data = {
	                    has_tags: true,
	                    tags: _this4.data.tags,
	                    projects: _this4.prepare_projects(projects)
	                };
	
	                _this4.render();
	            });
	
	            event.preventDefault();
	        }
	    }, {
	        key: 'handle_popup',
	        value: function handle_popup() {
	            var projectPopupHandler = new ProjectPopupHandler();
	            projectPopupHandler.run();
	        }
	    }]);
	
	    return Handler;
	}();
	
	var ProjectPopupHandler = function () {
	    function ProjectPopupHandler() {
	        _classCallCheck(this, ProjectPopupHandler);
	    }
	
	    _createClass(ProjectPopupHandler, [{
	        key: 'run',
	        value: function run() {
	            this.cache_dom();
	            this.bind_events();
	            this.prepare_state();
	            this.render();
	        }
	    }, {
	        key: 'cache_dom',
	        value: function cache_dom() {
	            this.$project_details = $('#project_details');
	            this.$picture_preview = this.$project_details.find('#picture_preview img');
	            this.$pictures = this.$project_details.find('#additional_pictures a');
	        }
	    }, {
	        key: 'bind_events',
	        value: function bind_events() {
	            this.$pictures.click(this.preview_picture.bind(this));
	        }
	    }, {
	        key: 'prepare_state',
	        value: function prepare_state() {
	            this.$active_picture = this.$pictures.first();
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            this.$picture_preview.attr('src', this.$active_picture.attr('href'));
	            this.$picture_preview.parent().attr('href', this.$active_picture.attr('href'));
	            this.$active_picture.addClass('active');
	            this.$active_picture.siblings().removeClass('active');
	        }
	    }, {
	        key: 'preview_picture',
	        value: function preview_picture(event) {
	            event.preventDefault();
	            this.$active_picture = $(event.currentTarget);
	            this.render();
	        }
	    }]);
	
	    return ProjectPopupHandler;
	}();
	
	$(document).ready(function () {
	    var handler = new Handler();
	
	    handler.run();
	});

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzZhMDEwYzNhMTI3NmQ0ZWFjNWYiLCJ3ZWJwYWNrOi8vLy4vdmNhcmQvc3RhdGljL3ZjYXJkL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztLQ3RDTSxPOzs7Ozs7OytCQUNJO0FBQ0Ysa0JBQUssU0FBTDtBQUNBLGtCQUFLLFdBQUw7QUFDSDs7O3FDQUVXO0FBQ1Isa0JBQUssYUFBTCxHQUFxQixFQUFFLGdCQUFGLENBQXJCO0FBQ0Esa0JBQUssYUFBTCxHQUFxQixFQUFFLGdCQUFGLENBQXJCO0FBQ0Esa0JBQUssYUFBTCxHQUFxQixFQUFFLGdCQUFGLENBQXJCO0FBQ0Esa0JBQUssUUFBTCxHQUFnQixFQUFFLFVBQUYsQ0FBaEI7QUFDQSxrQkFBSyxRQUFMLEdBQWdCLEtBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsaUNBQW5CLEVBQXNELElBQXRELEVBQWhCO0FBQ0g7Ozt1Q0FFYTtBQUNWLGtCQUFLLGFBQUwsQ0FBbUIsS0FBbkIsQ0FBeUIsS0FBSywwQkFBTCxDQUFnQyxJQUFoQyxDQUFxQyxJQUFyQyxDQUF6QjtBQUNBLGtCQUFLLGFBQUwsQ0FBbUIsS0FBbkIsQ0FBeUIsS0FBSywwQkFBTCxDQUFnQyxJQUFoQyxDQUFxQyxJQUFyQyxDQUF6QjtBQUNBLGtCQUFLLGFBQUwsQ0FBbUIsS0FBbkIsQ0FBeUIsS0FBSywwQkFBTCxDQUFnQyxJQUFoQyxDQUFxQyxJQUFyQyxDQUF6QjtBQUNBLGtCQUFLLFFBQUwsQ0FBYyxFQUFkLENBQWlCLE9BQWpCLEVBQTBCLGtCQUExQixFQUE4QyxLQUFLLHFCQUFMLENBQTJCLElBQTNCLENBQWdDLElBQWhDLENBQTlDO0FBQ0Esa0JBQUssUUFBTCxDQUFjLGFBQWQsQ0FBNEI7QUFDeEIsMkJBQVUsVUFEYztBQUV4Qix1QkFBTSxNQUZrQjtBQUd4Qiw0QkFBVyxFQUFDLGtCQUFrQixLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBbkI7QUFIYSxjQUE1QjtBQUtIOzs7a0NBRVE7QUFDTCxpQkFBTSxXQUFXLFNBQVMsTUFBVCxDQUFnQixLQUFLLFFBQXJCLEVBQStCLEtBQUssSUFBcEMsQ0FBakI7QUFDQSxrQkFBSyxRQUFMLENBQWMsSUFBZCxDQUFtQixRQUFuQjtBQUNIOzs7b0RBRTBCLEssRUFBTztBQUFBOztBQUM5QixlQUFFLEdBQUYsQ0FBTSxZQUFOLEVBQW9CLElBQXBCLENBQXlCLFVBQUMsSUFBRCxFQUFVO0FBQy9CLHVCQUFLLElBQUwsR0FBWTtBQUNSLCtCQURRO0FBRVIsK0JBQVU7QUFGRixrQkFBWjs7QUFLQSx1QkFBSyxNQUFMO0FBQ0gsY0FQRDs7QUFTQSxtQkFBTSxjQUFOO0FBQ0g7OztvREFFMEIsSyxFQUFPO0FBQUE7O0FBQzlCLGVBQUUsR0FBRixDQUFNLGdCQUFOLEVBQXdCLElBQXhCLENBQTZCLFVBQUMsUUFBRCxFQUFjO0FBQ3ZDLHdCQUFLLElBQUwsR0FBWSxFQUFDLGtCQUFELEVBQVo7QUFDQSx3QkFBSyxNQUFMO0FBQ0gsY0FIRDs7QUFLQSxtQkFBTSxjQUFOO0FBQ0g7OztvREFFMEIsSyxFQUFPO0FBQUE7O0FBQzlCLGVBQUUsR0FBRixDQUFNLHFCQUFOLEVBQTZCLElBQTdCLENBQWtDLFVBQUMsUUFBRCxFQUFjO0FBQzVDLHdCQUFLLElBQUwsR0FBWSxFQUFDLGtCQUFELEVBQVo7QUFDQSx3QkFBSyxNQUFMO0FBQ0gsY0FIRDs7QUFLQSxtQkFBTSxjQUFOO0FBQ0g7OzswQ0FFZ0IsUSxFQUFVO0FBQ3ZCLG9CQUFPLFNBQVMsR0FBVCxDQUFhLFVBQUMsT0FBRCxFQUFhO0FBQzdCLHlCQUFRLFlBQVIsR0FBdUIsUUFBUSxRQUFSLENBQWlCLENBQWpCLENBQXZCO0FBQ0Esd0JBQU8sT0FBUDtBQUNILGNBSE0sQ0FBUDtBQUlIOzs7K0NBRXFCLEssRUFBTztBQUFBOztBQUN6QixpQkFBTSxlQUFlLE1BQU0sYUFBTixDQUFvQixFQUF6Qzs7QUFFQSxlQUFFLEdBQUYsb0JBQXVCLFlBQXZCLFFBQXdDLElBQXhDLENBQTZDLFVBQUMsUUFBRCxFQUFjO0FBQ3ZELHdCQUFLLElBQUwsR0FBWTtBQUNSLCtCQUFVLElBREY7QUFFUiwyQkFBTSxPQUFLLElBQUwsQ0FBVSxJQUZSO0FBR1IsK0JBQVUsT0FBSyxnQkFBTCxDQUFzQixRQUF0QjtBQUhGLGtCQUFaOztBQU1BLHdCQUFLLE1BQUw7QUFDSCxjQVJEOztBQVVBLG1CQUFNLGNBQU47QUFDSDs7O3dDQUVjO0FBQ1gsaUJBQUksc0JBQXNCLElBQUksbUJBQUosRUFBMUI7QUFDQSxpQ0FBb0IsR0FBcEI7QUFDSDs7Ozs7O0tBR0MsbUI7Ozs7Ozs7K0JBQ0k7QUFDRixrQkFBSyxTQUFMO0FBQ0Esa0JBQUssV0FBTDtBQUNBLGtCQUFLLGFBQUw7QUFDQSxrQkFBSyxNQUFMO0FBQ0g7OztxQ0FFVztBQUNSLGtCQUFLLGdCQUFMLEdBQXdCLEVBQUUsa0JBQUYsQ0FBeEI7QUFDQSxrQkFBSyxnQkFBTCxHQUF3QixLQUFLLGdCQUFMLENBQXNCLElBQXRCLENBQTJCLHNCQUEzQixDQUF4QjtBQUNBLGtCQUFLLFNBQUwsR0FBaUIsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQix3QkFBM0IsQ0FBakI7QUFDSDs7O3VDQUVhO0FBQ1Ysa0JBQUssU0FBTCxDQUFlLEtBQWYsQ0FBcUIsS0FBSyxlQUFMLENBQXFCLElBQXJCLENBQTBCLElBQTFCLENBQXJCO0FBQ0g7Ozt5Q0FFZTtBQUNaLGtCQUFLLGVBQUwsR0FBdUIsS0FBSyxTQUFMLENBQWUsS0FBZixFQUF2QjtBQUNIOzs7a0NBRVE7QUFDTCxrQkFBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixLQUEzQixFQUFrQyxLQUFLLGVBQUwsQ0FBcUIsSUFBckIsQ0FBMEIsTUFBMUIsQ0FBbEM7QUFDQSxrQkFBSyxnQkFBTCxDQUFzQixNQUF0QixHQUErQixJQUEvQixDQUFvQyxNQUFwQyxFQUE0QyxLQUFLLGVBQUwsQ0FBcUIsSUFBckIsQ0FBMEIsTUFBMUIsQ0FBNUM7QUFDQSxrQkFBSyxlQUFMLENBQXFCLFFBQXJCLENBQThCLFFBQTlCO0FBQ0Esa0JBQUssZUFBTCxDQUFxQixRQUFyQixHQUFnQyxXQUFoQyxDQUE0QyxRQUE1QztBQUNIOzs7eUNBRWUsSyxFQUFPO0FBQ25CLG1CQUFNLGNBQU47QUFDQSxrQkFBSyxlQUFMLEdBQXVCLEVBQUUsTUFBTSxhQUFSLENBQXZCO0FBQ0Esa0JBQUssTUFBTDtBQUNIOzs7Ozs7QUFHTCxHQUFFLFFBQUYsRUFBWSxLQUFaLENBQWtCLFlBQVc7QUFDekIsU0FBSSxVQUFVLElBQUksT0FBSixFQUFkOztBQUVBLGFBQVEsR0FBUjtBQUNILEVBSkQsRSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNzZhMDEwYzNhMTI3NmQ0ZWFjNWZcbiAqKi8iLCJjbGFzcyBIYW5kbGVyIHtcbiAgICBydW4oKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfZG9tKCk7XG4gICAgICAgIHRoaXMuYmluZF9ldmVudHMoKTtcbiAgICB9XG5cbiAgICBjYWNoZV9kb20oKSB7XG4gICAgICAgIHRoaXMuJHByb2plY3RzX25hdiA9ICQoJ2EjcHJvamVjdHNfbmF2Jyk7XG4gICAgICAgIHRoaXMuJGNvbnRhY3RzX25hdiA9ICQoJ2EjY29udGFjdHNfbmF2Jyk7XG4gICAgICAgIHRoaXMuJGFib3V0X21lX25hdiA9ICQoJ2EjYWJvdXRfbWVfbmF2Jyk7XG4gICAgICAgIHRoaXMuJGNvbnRlbnQgPSAkKCcjY29udGVudCcpO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy4kY29udGVudC5maW5kKCdbdHlwZT1cInRleHQvbXVzdGFjaGVfdGVtcGxhdGVcIl0nKS5odG1sKCk7XG4gICAgfVxuXG4gICAgYmluZF9ldmVudHMoKSB7XG4gICAgICAgIHRoaXMuJHByb2plY3RzX25hdi5jbGljayh0aGlzLmdldF9hbmRfdmlld19wcm9qZWN0c190YWdzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLiRjb250YWN0c19uYXYuY2xpY2sodGhpcy5nZXRfYW5kX3ZpZXdfY29udGFjdHNfaW5mby5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy4kYWJvdXRfbWVfbmF2LmNsaWNrKHRoaXMuZ2V0X2FuZF92aWV3X2Fib3V0X21lX3RleHQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuJGNvbnRlbnQub24oJ2NsaWNrJywgJyNwcm9qZWN0c190YWdzIGEnLCB0aGlzLmdldF9hbmRfdmlld19wcm9qZWN0cy5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy4kY29udGVudC5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgIGRlbGVnYXRlOiAnLnBob3RvIGEnLFxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiB7YWpheENvbnRlbnRBZGRlZDogdGhpcy5oYW5kbGVfcG9wdXAuYmluZCh0aGlzKX1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCByZW5kZXJlZCA9IE11c3RhY2hlLnJlbmRlcih0aGlzLnRlbXBsYXRlLCB0aGlzLmRhdGEpO1xuICAgICAgICB0aGlzLiRjb250ZW50Lmh0bWwocmVuZGVyZWQpO1xuICAgIH1cblxuICAgIGdldF9hbmRfdmlld19wcm9qZWN0c190YWdzKGV2ZW50KSB7XG4gICAgICAgICQuZ2V0KFwiL2dldF90YWdzL1wiKS5kb25lKCh0YWdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBoYXNfdGFnczogdHJ1ZSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgZ2V0X2FuZF92aWV3X2NvbnRhY3RzX2luZm8oZXZlbnQpIHtcbiAgICAgICAgJC5nZXQoXCIvZ2V0X2NvbnRhY3RzL1wiKS5kb25lKChjb250YWN0cykgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0ge2NvbnRhY3RzfTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgZ2V0X2FuZF92aWV3X2Fib3V0X21lX3RleHQoZXZlbnQpIHtcbiAgICAgICAgJC5nZXQoXCIvZ2V0X2Fib3V0X21lX3RleHQvXCIpLmRvbmUoKGFib3V0X21lKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB7YWJvdXRfbWV9O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBwcmVwYXJlX3Byb2plY3RzKHByb2plY3RzKSB7XG4gICAgICAgIHJldHVybiBwcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHtcbiAgICAgICAgICAgIHByb2plY3QubWFpbl9waWN0dXJlID0gcHJvamVjdC5waWN0dXJlc1swXTtcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRfYW5kX3ZpZXdfcHJvamVjdHMoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFnX3VybF9uYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5pZDtcblxuICAgICAgICAkLmdldChgL2dldF9wcm9qZWN0cy8ke3RhZ191cmxfbmFtZX0vYCkuZG9uZSgocHJvamVjdHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBoYXNfdGFnczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0YWdzOiB0aGlzLmRhdGEudGFncyxcbiAgICAgICAgICAgICAgICBwcm9qZWN0czogdGhpcy5wcmVwYXJlX3Byb2plY3RzKHByb2plY3RzKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgaGFuZGxlX3BvcHVwKCkge1xuICAgICAgICBsZXQgcHJvamVjdFBvcHVwSGFuZGxlciA9IG5ldyBQcm9qZWN0UG9wdXBIYW5kbGVyKCk7XG4gICAgICAgIHByb2plY3RQb3B1cEhhbmRsZXIucnVuKCk7XG4gICAgfVxufVxuXG5jbGFzcyBQcm9qZWN0UG9wdXBIYW5kbGVyIHtcbiAgICBydW4oKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfZG9tKCk7XG4gICAgICAgIHRoaXMuYmluZF9ldmVudHMoKTtcbiAgICAgICAgdGhpcy5wcmVwYXJlX3N0YXRlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgY2FjaGVfZG9tKCkge1xuICAgICAgICB0aGlzLiRwcm9qZWN0X2RldGFpbHMgPSAkKCcjcHJvamVjdF9kZXRhaWxzJyk7XG4gICAgICAgIHRoaXMuJHBpY3R1cmVfcHJldmlldyA9IHRoaXMuJHByb2plY3RfZGV0YWlscy5maW5kKCcjcGljdHVyZV9wcmV2aWV3IGltZycpO1xuICAgICAgICB0aGlzLiRwaWN0dXJlcyA9IHRoaXMuJHByb2plY3RfZGV0YWlscy5maW5kKCcjYWRkaXRpb25hbF9waWN0dXJlcyBhJyk7XG4gICAgfVxuXG4gICAgYmluZF9ldmVudHMoKSB7XG4gICAgICAgIHRoaXMuJHBpY3R1cmVzLmNsaWNrKHRoaXMucHJldmlld19waWN0dXJlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByZXBhcmVfc3RhdGUoKSB7XG4gICAgICAgIHRoaXMuJGFjdGl2ZV9waWN0dXJlID0gdGhpcy4kcGljdHVyZXMuZmlyc3QoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuJHBpY3R1cmVfcHJldmlldy5hdHRyKCdzcmMnLCB0aGlzLiRhY3RpdmVfcGljdHVyZS5hdHRyKCdocmVmJykpO1xuICAgICAgICB0aGlzLiRwaWN0dXJlX3ByZXZpZXcucGFyZW50KCkuYXR0cignaHJlZicsIHRoaXMuJGFjdGl2ZV9waWN0dXJlLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgIHRoaXMuJGFjdGl2ZV9waWN0dXJlLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kYWN0aXZlX3BpY3R1cmUuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgcHJldmlld19waWN0dXJlKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuJGFjdGl2ZV9waWN0dXJlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGxldCBoYW5kbGVyID0gbmV3IEhhbmRsZXIoKTtcblxuICAgIGhhbmRsZXIucnVuKCk7XG59KTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdmNhcmQvc3RhdGljL3ZjYXJkL2pzL3NjcmlwdC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=